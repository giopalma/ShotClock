import {
  D,
  _,
  b,
  l
} from "./chunk-37DX2TVE.js";
import "./chunk-PZ5AY32C.js";

// node_modules/.pnpm/preact-render-to-string@6.5.11_preact@10.25.0/node_modules/preact-render-to-string/dist/index.module.js
var r = /[\s\n\\/='"\0<>]/;
var o = /^(xlink|xmlns|xml)([A-Z])/;
var i = /^accessK|^auto[A-Z]|^cell|^ch|^col|cont|cross|dateT|encT|form[A-Z]|frame|hrefL|inputM|maxL|minL|noV|playsI|popoverT|readO|rowS|src[A-Z]|tabI|useM|item[A-Z]/;
var a = /^ac|^ali|arabic|basel|cap|clipPath$|clipRule$|color|dominant|enable|fill|flood|font|glyph[^R]|horiz|image|letter|lighting|marker[^WUH]|overline|panose|pointe|paint|rendering|shape|stop|strikethrough|stroke|text[^L]|transform|underline|unicode|units|^v[^i]|^w|^xH/;
var c = /* @__PURE__ */ new Set(["draggable", "spellcheck"]);
var s = /["&<]/;
function l2(e) {
  if (0 === e.length || false === s.test(e)) return e;
  for (var t = 0, n = 0, r2 = "", o2 = ""; n < e.length; n++) {
    switch (e.charCodeAt(n)) {
      case 34:
        o2 = "&quot;";
        break;
      case 38:
        o2 = "&amp;";
        break;
      case 60:
        o2 = "&lt;";
        break;
      default:
        continue;
    }
    n !== t && (r2 += e.slice(t, n)), r2 += o2, t = n + 1;
  }
  return n !== t && (r2 += e.slice(t, n)), r2;
}
var u = {};
var f = /* @__PURE__ */ new Set(["animation-iteration-count", "border-image-outset", "border-image-slice", "border-image-width", "box-flex", "box-flex-group", "box-ordinal-group", "column-count", "fill-opacity", "flex", "flex-grow", "flex-negative", "flex-order", "flex-positive", "flex-shrink", "flood-opacity", "font-weight", "grid-column", "grid-row", "line-clamp", "line-height", "opacity", "order", "orphans", "stop-opacity", "stroke-dasharray", "stroke-dashoffset", "stroke-miterlimit", "stroke-opacity", "stroke-width", "tab-size", "widows", "z-index", "zoom"]);
var p = /[A-Z]/g;
function h(e) {
  var t = "";
  for (var n in e) {
    var r2 = e[n];
    if (null != r2 && "" !== r2) {
      var o2 = "-" == n[0] ? n : u[n] || (u[n] = n.replace(p, "-$&").toLowerCase()), i2 = ";";
      "number" != typeof r2 || o2.startsWith("--") || f.has(o2) || (i2 = "px;"), t = t + o2 + ":" + r2 + i2;
    }
  }
  return t || void 0;
}
function d() {
  this.__d = true;
}
function _2(e, t) {
  return { __v: e, context: t, props: e.props, setState: d, forceUpdate: d, __d: true, __h: new Array(0) };
}
function v(e, t, n) {
  if (!e.s) {
    if (n instanceof m) {
      if (!n.s) return void (n.o = v.bind(null, e, t));
      1 & t && (t = n.s), n = n.v;
    }
    if (n && n.then) return void n.then(v.bind(null, e, t), v.bind(null, e, 2));
    e.s = t, e.v = n;
    const r2 = e.o;
    r2 && r2(e);
  }
}
var m = function() {
  function e() {
  }
  return e.prototype.then = function(t, n) {
    var r2 = new e(), o2 = this.s;
    if (o2) {
      var i2 = 1 & o2 ? t : n;
      if (i2) {
        try {
          v(r2, 1, i2(this.v));
        } catch (e2) {
          v(r2, 2, e2);
        }
        return r2;
      }
      return this;
    }
    return this.o = function(e2) {
      try {
        var o3 = e2.v;
        1 & e2.s ? v(r2, 1, t ? t(o3) : o3) : n ? v(r2, 1, n(o3)) : v(r2, 2, o3);
      } catch (e3) {
        v(r2, 2, e3);
      }
    }, r2;
  }, e;
}();
function y(e) {
  return e instanceof m && 1 & e.s;
}
function g(e, t, n) {
  for (var r2; ; ) {
    var o2 = e();
    if (y(o2) && (o2 = o2.v), !o2) return i2;
    if (o2.then) {
      r2 = 0;
      break;
    }
    var i2 = n();
    if (i2 && i2.then) {
      if (!y(i2)) {
        r2 = 1;
        break;
      }
      i2 = i2.s;
    }
    if (t) {
      var a2 = t();
      if (a2 && a2.then && !y(a2)) {
        r2 = 2;
        break;
      }
    }
  }
  var c2 = new m(), s2 = v.bind(null, c2, 2);
  return (0 === r2 ? o2.then(u2) : 1 === r2 ? i2.then(l3) : a2.then(f2)).then(void 0, s2), c2;
  function l3(r3) {
    i2 = r3;
    do {
      if (t && (a2 = t()) && a2.then && !y(a2)) return void a2.then(f2).then(void 0, s2);
      if (!(o2 = e()) || y(o2) && !o2.v) return void v(c2, 1, i2);
      if (o2.then) return void o2.then(u2).then(void 0, s2);
      y(i2 = n()) && (i2 = i2.v);
    } while (!i2 || !i2.then);
    i2.then(l3).then(void 0, s2);
  }
  function u2(e2) {
    e2 ? (i2 = n()) && i2.then ? i2.then(l3).then(void 0, s2) : l3(i2) : v(c2, 1, i2);
  }
  function f2() {
    (o2 = e()) ? o2.then ? o2.then(u2).then(void 0, s2) : u2(o2) : v(c2, 1, i2);
  }
}
function b2(e, t) {
  try {
    var n = e();
  } catch (e2) {
    return t(true, e2);
  }
  return n && n.then ? n.then(t.bind(null, false), t.bind(null, true)) : t(false, n);
}
var k;
var w;
var x;
var C;
var S = function(r2, o2) {
  try {
    var i2 = l.__s;
    l.__s = true, k = l.__b, w = l.diffed, x = l.__r, C = l.unmount;
    var a2 = _(b, null);
    return a2.__k = [r2], Promise.resolve(b2(function() {
      return Promise.resolve(U(r2, o2 || A, false, void 0, a2, true, void 0)).then(function(e) {
        var t, n = function() {
          if (E(e)) {
            var n2 = function() {
              var e2 = o3.join(j);
              return t = 1, e2;
            }, r3 = 0, o3 = e, i3 = g(function() {
              return !!o3.some(function(e2) {
                return e2 && "function" == typeof e2.then;
              }) && r3++ < 25;
            }, void 0, function() {
              return Promise.resolve(Promise.all(o3)).then(function(e2) {
                o3 = e2.flat();
              });
            });
            return i3 && i3.then ? i3.then(n2) : n2();
          }
        }();
        return n && n.then ? n.then(function(n2) {
          return t ? n2 : e;
        }) : t ? n : e;
      });
    }, function(t, n) {
      if (l.__c && l.__c(r2, L), l.__s = i2, L.length = 0, t) throw n;
      return n;
    }));
  } catch (e) {
    return Promise.reject(e);
  }
};
var A = {};
var L = [];
var E = Array.isArray;
var T = Object.assign;
var j = "";
function P(e, t) {
  var n, r2 = e.type, o2 = true;
  return e.__c ? (o2 = false, (n = e.__c).state = n.__s) : n = new r2(e.props, t), e.__c = n, n.__v = e, n.props = e.props, n.context = t, n.__d = true, null == n.state && (n.state = A), null == n.__s && (n.__s = n.state), r2.getDerivedStateFromProps ? n.state = T({}, n.state, r2.getDerivedStateFromProps(n.props, n.state)) : o2 && n.componentWillMount ? (n.componentWillMount(), n.state = n.__s !== n.state ? n.__s : n.state) : !o2 && n.componentWillUpdate && n.componentWillUpdate(), x && x(e), n.render(n.props, n.state, t);
}
function U(t, s2, u2, f2, p2, d2, v2) {
  if (null == t || true === t || false === t || t === j) return j;
  var m2 = typeof t;
  if ("object" != m2) return "function" == m2 ? j : "string" == m2 ? l2(t) : t + j;
  if (E(t)) {
    var y2, g2 = j;
    p2.__k = t;
    for (var b3 = 0; b3 < t.length; b3++) {
      var S2 = t[b3];
      if (null != S2 && "boolean" != typeof S2) {
        var L2, D2 = U(S2, s2, u2, f2, p2, d2, v2);
        "string" == typeof D2 ? g2 += D2 : (y2 || (y2 = []), g2 && y2.push(g2), g2 = j, E(D2) ? (L2 = y2).push.apply(L2, D2) : y2.push(D2));
      }
    }
    return y2 ? (g2 && y2.push(g2), y2) : g2;
  }
  if (void 0 !== t.constructor) return j;
  t.__ = p2, k && k(t);
  var F = t.type, M = t.props;
  if ("function" == typeof F) {
    var W, $, z, H = s2;
    if (F === b) {
      if ("tpl" in M) {
        for (var N = j, q = 0; q < M.tpl.length; q++) if (N += M.tpl[q], M.exprs && q < M.exprs.length) {
          var B = M.exprs[q];
          if (null == B) continue;
          "object" != typeof B || void 0 !== B.constructor && !E(B) ? N += B : N += U(B, s2, u2, f2, t, d2, v2);
        }
        return N;
      }
      if ("UNSTABLE_comment" in M) return "<!--" + l2(M.UNSTABLE_comment) + "-->";
      $ = M.children;
    } else {
      if (null != (W = F.contextType)) {
        var I = s2[W.__c];
        H = I ? I.props.value : W.__;
      }
      var O = F.prototype && "function" == typeof F.prototype.render;
      if (O) $ = P(t, H), z = t.__c;
      else {
        t.__c = z = _2(t, H);
        for (var R = 0; z.__d && R++ < 25; ) z.__d = false, x && x(t), $ = F.call(z, M, H);
        z.__d = true;
      }
      if (null != z.getChildContext && (s2 = T({}, s2, z.getChildContext())), O && l.errorBoundaries && (F.getDerivedStateFromError || z.componentDidCatch)) {
        $ = null != $ && $.type === b && null == $.key && null == $.props.tpl ? $.props.children : $;
        try {
          return U($, s2, u2, f2, t, d2, v2);
        } catch (e) {
          return F.getDerivedStateFromError && (z.__s = F.getDerivedStateFromError(e)), z.componentDidCatch && z.componentDidCatch(e, A), z.__d ? ($ = P(t, s2), null != (z = t.__c).getChildContext && (s2 = T({}, s2, z.getChildContext())), U($ = null != $ && $.type === b && null == $.key && null == $.props.tpl ? $.props.children : $, s2, u2, f2, t, d2, v2)) : j;
        } finally {
          w && w(t), t.__ = null, C && C(t);
        }
      }
    }
    $ = null != $ && $.type === b && null == $.key && null == $.props.tpl ? $.props.children : $;
    try {
      var V = U($, s2, u2, f2, t, d2, v2);
      return w && w(t), t.__ = null, l.unmount && l.unmount(t), V;
    } catch (n) {
      if (!d2 && v2 && v2.onError) {
        var K = v2.onError(n, t, function(e) {
          return U(e, s2, u2, f2, t, d2, v2);
        });
        if (void 0 !== K) return K;
        var G = l.__e;
        return G && G(n, t), j;
      }
      if (!d2) throw n;
      if (!n || "function" != typeof n.then) throw n;
      return n.then(function e() {
        try {
          return U($, s2, u2, f2, t, d2, v2);
        } catch (n2) {
          if (!n2 || "function" != typeof n2.then) throw n2;
          return n2.then(function() {
            return U($, s2, u2, f2, t, d2, v2);
          }, e);
        }
      });
    }
  }
  var J, Q = "<" + F, X = j;
  for (var Y in M) {
    var ee = M[Y];
    if ("function" != typeof ee || "class" === Y || "className" === Y) {
      switch (Y) {
        case "children":
          J = ee;
          continue;
        case "key":
        case "ref":
        case "__self":
        case "__source":
          continue;
        case "htmlFor":
          if ("for" in M) continue;
          Y = "for";
          break;
        case "className":
          if ("class" in M) continue;
          Y = "class";
          break;
        case "defaultChecked":
          Y = "checked";
          break;
        case "defaultSelected":
          Y = "selected";
          break;
        case "defaultValue":
        case "value":
          switch (Y = "value", F) {
            case "textarea":
              J = ee;
              continue;
            case "select":
              f2 = ee;
              continue;
            case "option":
              f2 != ee || "selected" in M || (Q += " selected");
          }
          break;
        case "dangerouslySetInnerHTML":
          X = ee && ee.__html;
          continue;
        case "style":
          "object" == typeof ee && (ee = h(ee));
          break;
        case "acceptCharset":
          Y = "accept-charset";
          break;
        case "httpEquiv":
          Y = "http-equiv";
          break;
        default:
          if (o.test(Y)) Y = Y.replace(o, "$1:$2").toLowerCase();
          else {
            if (r.test(Y)) continue;
            "-" !== Y[4] && !c.has(Y) || null == ee ? u2 ? a.test(Y) && (Y = "panose1" === Y ? "panose-1" : Y.replace(/([A-Z])/g, "-$1").toLowerCase()) : i.test(Y) && (Y = Y.toLowerCase()) : ee += j;
          }
      }
      null != ee && false !== ee && (Q = true === ee || ee === j ? Q + " " + Y : Q + " " + Y + '="' + ("string" == typeof ee ? l2(ee) : ee + j) + '"');
    }
  }
  if (r.test(F)) throw new Error(F + " is not a valid HTML tag name in " + Q + ">");
  if (X || ("string" == typeof J ? X = l2(J) : null != J && false !== J && true !== J && (X = U(J, s2, "svg" === F || "foreignObject" !== F && u2, f2, t, d2, v2))), w && w(t), t.__ = null, C && C(t), !X && Z.has(F)) return Q + "/>";
  var te = "</" + F + ">", ne = Q + ">";
  return E(X) ? [ne].concat(X, [te]) : "string" != typeof X ? [ne, X, te] : ne + X + te;
}
var Z = /* @__PURE__ */ new Set(["area", "base", "br", "col", "command", "embed", "hr", "img", "input", "keygen", "link", "meta", "param", "source", "track", "wbr"]);

// node_modules/.pnpm/preact-iso@2.8.1_preact-render-to-string@6.5.11_preact@10.25.0__preact@10.25.0/node_modules/preact-iso/src/prerender.js
var vnodeHook;
var old = l.vnode;
l.vnode = (vnode) => {
  if (old) old(vnode);
  if (vnodeHook) vnodeHook(vnode);
};
async function prerender(vnode, options) {
  options = options || {};
  const props = options.props;
  if (typeof vnode === "function") {
    vnode = _(vnode, props);
  } else if (props) {
    vnode = D(vnode, props);
  }
  let links = /* @__PURE__ */ new Set();
  vnodeHook = ({ type, props: props2 }) => {
    if (type === "a" && props2 && props2.href && (!props2.target || props2.target === "_self")) {
      links.add(props2.href);
    }
  };
  try {
    let html = await S(vnode);
    html += `<script type="isodata"><\/script>`;
    return { html, links };
  } finally {
    vnodeHook = null;
  }
}
function locationStub(path) {
  globalThis.location = {};
  const u2 = new URL(path, "http://localhost");
  for (const i2 in u2) {
    try {
      globalThis.location[i2] = /to[A-Z]/.test(i2) ? u2[i2].bind(u2) : String(u2[i2]);
    } catch {
    }
  }
}
export {
  prerender as default,
  locationStub
};
//# sourceMappingURL=prerender-EJY7DGCU.js.map
