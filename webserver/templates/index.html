<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Home</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <!--Utilizzo di Python direttamente in HTML usando Jinja2, la funzione viene eseguita dal server-->
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
</head>

<body>
    <canvas id="videoCanvas" width="600" height="450"></canvas>

    <button class="btn btn-primary mb-2">
        Aggiungi Crosshair
    </button>

    <script type="module">
        import interact from 'https://cdn.interactjs.io/v1.10.27/interactjs/index.js'
        const canvas = document.getElementById('videoCanvas');
        const ctx = canvas.getContext('2d');
        const img = new Image();

        img.onload = function () {
            // Draw image to fit canvas while maintaining aspect ratio
            const scale = Math.min(canvas.width / img.width, canvas.height / img.height);
            const x = (canvas.width - img.width * scale) / 2;
            const y = (canvas.height - img.height * scale) / 2;

            ctx.drawImage(img, x, y, img.width * scale, img.height * scale);
        };

        img.src = '/video_feed';

        // Refresh the image periodically for live video feed
        setInterval(() => {
            img.src = '/video_feed';
        }, 1000); // Update every second
    </script>
</body>

</html>